<?php	// TubeKit Beta 4	// http://www.tubekit.org	// Author: Chirag Shah	// Date: 10/22/2010	ini_set("memory_limit","100M");	require_once("config.php");	require_once("../".$mpdirectory."/rss_fetch.inc");	require_once("parseRSS.php");	$t=getdate();        $today=date('Y-m-d',$t[0]);        $category = array(0 => 'All',1 => 'Autos',2 => 'Comedy',3 => 'Education',4 => 'Entertainment', 5 => 'Film', 6 => 'Gaming', 7 => 'Howto', 8 => 'News',9 => 'Nonprofits', 10 => 'People', 11 => 'Pets', 12 => 'Science',13 => 'Sports', 14 => 'Travel');	for($i=0; $i < 15; $i++){	 echo("if you want ".$category[$i]. " then put ".$i. "\n");	}	$input = (int) fgets(STDIN,4096);	if($input == 0){	  $ca = "?v=2&time=today";	}else{	  $ca ="_".$category[$input]."?v=2&time=today";	}        $url = "http://gdata.youtube.com/feeds/api/standardfeeds/most_viewed$ca&max-results=50&start-index=1";	$date = date("Y_m_d_H_i_s");	$newtablename = $date.$category[$input]."_keyword50";	$query = "create table $newtablename ( id INT NOT NULL AUTO_INCREMENT,PRIMARY KEY(id),name VARCHAR(100),keyword VARCHAR(1000),video_id VARCHAR(11),video_count integer(15) )";	$vresult = mysql_query($query) or die(" ". mysql_error());			$rss = fetch_rss($url);			//var_dump($rss);			foreach($rss->items as $item) 			{				$yt_url = $item['link'];				$ytID = substr($yt_url,31,11);				$feedURL = "http://gdata.youtube.com/feeds/api/videos/$ytID";echo($feedURL."\n");				if(file_get_contents($feedURL))				{						$entry = simplexml_load_file($feedURL);						$video = parseVideoEntry($entry);												$timestamp = time();						$title = $video->title;						$description = $video->description;						$username = $video->username;						$upload_time = $video->published;						$duration = $video->length;						$category = $video->category;						$video_url = $video->watchURL;						$thumb_url = 'http://i1.ytimg.com/vi/' . $ytID . '/0.jpg';						$keywords = $video->keywords;//echo($keywords."\n");						$view_count = $video->viewCount;						$rating_count = $video->numrating;						$rating_avg = $video->rating;						$comment_count = $video->commentsCount;						$favorited = $video->favoriteCount;							$response_count = $video->responseCount;						echo($view_count. "times\n");						$key=explode(',',$keywords);                                                print $key;						$length = count($key);						for($i=0;$i < $length; $i++){						            $key[$i] = trim($key[$i]);                                                	    $q = "insert into $newtablename VALUES ('','$title','$key[$i]','$ytID','$view_count')";						            echo($q. "\n");							    $r = mysql_query($q) or mysql_error();				 		}                                		var_dump($key);				}			} // foreach ($rss->items as $item) 	 ?>